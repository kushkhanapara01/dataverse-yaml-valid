version: 0.1.0
jobId: '571'
jobName: Source Aligned DP 3
jobType: Source Aligned Data Product
alias: test_icerberg
discoveryPort:
  name: Source Aligned DP 3
  description: ''
  category: ''
  image: 'https://google.com'
  autofillUserinfo: ''
  tags: []
  extra: {}
inputPorts:
  - alias: test_dataset_3_1
    description: test dataset 3
    tags: []
    extra: {}
    syncType: pull
    type: s3-csv
    dataSetUrn: 'urn:dv:dataset:d6c0a3ce-8b37-4831-b460-43df14ee7fa5'
    filter: ''
    projection: []
productState:
  alias: test_icerberg
  refreshInterval: ''
  retentionVersions: ''
  updateStrategy: overwrite
  logicalSchema:
    properties:
      id:
        type: NUMBER
      name:
        type: STRING
      marks:
        type: NUMBER
      modified:
        type: DATETIME
  productStoreState:
    enforceSchemaMethod: ''
  isProfilingEnabled: true
transformation:
  - alias: Spark_SQL_1
    type: SQL
    description: test_spark_sql
    query: test
    references:
      - alias: test
        sqlReference: test$dataset$3$1
controlPort:
  dataQualityRules:
    NullCombinationCheck:
      productState:
        referenceAlias: test_icerberg
        checks:
          - columns:
              - test
            expression: '>='
            number: 11
      inputPort:
        - checks:
            - columns:
                - test
              expression: ==
              number: 1
          referenceAlias: test_dataset_3_1
      transformation:
        - checks:
            - columns:
                - test
              expression: <
              number: 10
          referenceAlias: Spark_SQL_1
    RecordCountCheck:
      inputPort:
        - expression: '>='
          number: 10
          referenceAlias: test_dataset_3_1
      transformation:
        - expression: '>='
          number: 10
          referenceAlias: Spark_SQL_1
    NullValueCheck:
      inputPort:
        - checks:
            - column: test
              expression: <=
              number: 10
          referenceAlias: test_dataset_3_1
      transformation:
        - checks:
            - column: test
              expression: <=
              number: 11
          referenceAlias: Spark_SQL_1
